# Flaps

The flaps of this split flap displays are 0.8mm PCB's. In this directory you will find the required tools needed to produce the production files necessary for ordering the flaps.

## Flap Generator

This is a browser based tool which allows you to quickly generate a character set for the OpenFlap display. You can select a font, size and the desired character set. Additionally you can adjust the scale, width and position of each character. The tool allows you to export and import your project file so you can continue your work at a later time.

A default character set is contained within the `defaultFlapSet.json` file. This file is loaded by default within the application. The default file contains the following character set:

```text
 ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789â‚¬$!?.,:/@#&
```

By clicking on the **Generate Files** button, a set of *.svg* files are generated for each flap. Each flap contains a top and bottom layer. The top layer contain the upper part of the character and the bottom layer contains the lower part of the next character flipped vertically. All files are bundled in a *.zip* and downloaded to your computer. The *.svg* files within this *.zip* folder are meant to be used by [gerbolyze](https://github.com/jaseg/gerbolyze) to generate the gerber files for the production of the flaps.

A wrapper script `svg_to_gerber.sh` is provide witch takes two inputs: the input *.zip* file generated by the browser based flap generator and the output directory where the gerber files will be stored. The script will extract the *.zip* file and run `gerbolyze` on each *.svg* file. The output gerber files will be stored as a *.zip* file in the output directory. 

## Considerations

When creating a character set, make sure the flaps do not have any part of the character show below a certain distance from the bottom. This is because the bottom of previous flaps are always visible on the display. In the OpenFlap display, it's around 5mm from the bottom of the flap. The default character set uses 8mm to be on the safe side.

## ToDo

- [ ] Add support for custom svg glyph upload.

## Known Issues

- It's possible that "holes" in svg paths are "closed" when increasing the thickness of a glyph. This will only become apparent when viewing the gerbers as it does not show up in the generator tool.